controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    animation.runImageAnimation(
    player_1,
    [img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f2222222f22f.
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f222ff22222ff222f
        f22222fffff22222f
        f222222222222222f
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .fffffffffffffff.
        `,img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f2222222f22f.
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222ffff22f
        f22f2222ff2222f2f
        f222ff22f222222ff
        f22222fff222222f.
        f2222222f222222f.
        .fe2222ef222222f.
        .feeeeeeff2222f..
        ..feeeef.fffff...
        ...ffff..........
        `,img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f2222222f22f.
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f222ff22222ff222f
        f22222fffff22222f
        f222222222222222f
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .fffffffffffffff.
        `,img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f2222222f22f.
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22ffff222222f22f
        f2f2222ff2222f22f
        ff222222f22ff222f
        .f222222fff22222f
        .f222222f2222222f
        .f222222fe2222ef.
        ..f2222ffeeeeeef.
        ...fffff.feeeef..
        ..........ffff...
        `],
    200,
    true
    )
})
controller.down.onEvent(ControllerButtonEvent.Released, function () {
    animation.stopAnimation(animation.AnimationTypes.All, player_1)
    player_1.setImage(img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f9991119f22f.
        f22f999991199f22f
        f22f999999919f22f
        f22f999999999f22f
        f22f999999999f22f
        f22f999999999f22f
        f222ff99999ff222f
        f22222fffff22222f
        f222222222222222f
        f222222222222222f
        f222222222222222f
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .fffffffffffffff.
        `)
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    animation.runImageAnimation(
    player_1,
    assets.animation`WalkLeft`,
    200,
    true
    )
})
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    animation.stopAnimation(animation.AnimationTypes.All, player_1)
    player_1.setImage(img`
        .....fffffff.....
        ....f2222222f....
        ....f22222222f...
        ...f222222222ff..
        ffff22222222f11f.
        feef2222222f9111f
        feef2222222f1999f
        feef2222222f9999f
        feef2222222f9999f
        feef2222222f9999f
        feef22222222f99f.
        feef222222222ff..
        feef2222222222f..
        feef2222222222f..
        feef222222222f...
        .fff222222222f...
        ...f222222222f...
        ....f2222222f....
        ....f2222222f....
        ....fffffffff....
        `)
})
controller.left.onEvent(ControllerButtonEvent.Released, function () {
    animation.stopAnimation(animation.AnimationTypes.All, player_1)
    player_1.setImage(img`
        .....fffffff.....
        ....f2222222f....
        ...f22222222f....
        ..ff222222222f...
        .f11f22222222ffff
        f1119f2222222feef
        f9991f2222222feef
        f9999f2222222feef
        f9999f2222222feef
        f9999f2222222feef
        .f99f22222222feef
        ..ff222222222feef
        ..f2222222222feef
        ..f2222222222feef
        ...f222222222feef
        ...f222222222fff.
        ...f222222222f...
        ....f2222222f....
        ....f2222222f....
        ....fffffffff....
        `)
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    animation.runImageAnimation(
    player_1,
    assets.animation`WalkRight`,
    200,
    true
    )
})
controller.up.onEvent(ControllerButtonEvent.Released, function () {
    animation.stopAnimation(animation.AnimationTypes.All, player_1)
    player_1.setImage(img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f2222222f22f.
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f22f222222222f22f
        f222ff22222ff222f
        f22222fffff22222f
        f222222222222222f
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .fffffffffffffff.
        `)
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    animation.runImageAnimation(
    player_1,
    [img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f9991119f22f.
        f22f999991199f22f
        f22f999999919f22f
        f22f999999999f22f
        f22f999999999f22f
        f22f999999999f22f
        f222ff99999ff222f
        f22222fffff22222f
        f222222222222222f
        f222222222222222f
        f222222222222222f
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .fffffffffffffff.
        `,img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f9991119f22f.
        f22f999991199f22f
        f22f999999919f22f
        f22f999999999f22f
        f22f999999999f22f
        f22f999999999f22f
        f222ff9999ffff22f
        f22222ffff2222f2f
        f2222222f222222ff
        f2222222f222222f.
        f2222222f222222f.
        .fe2222ef222222f.
        .feeeeeeff2222f..
        ..feeeef.fffff...
        ...ffff..........
        `,img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f9991119f22f.
        f22f999991199f22f
        f22f999999919f22f
        f22f999999999f22f
        f22f999999999f22f
        f22f999999999f22f
        f222ff99999ff222f
        f22222fffff22222f
        f222222222222222f
        f222222222222222f
        f222222222222222f
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .f222222f222222f.
        .fffffffffffffff.
        `,img`
        .....fffffff.....
        ...ff2222222ff...
        ..f22222222222f..
        .f222fffffff222f.
        .f22f9991119f22f.
        f22f999991199f22f
        f22f999999919f22f
        f22f999999999f22f
        f22f999999999f22f
        f22f999999999f22f
        f22ffff9999ff222f
        f2f2222ffff22222f
        ff222222f2222222f
        .f222222f2222222f
        .f222222f2222222f
        .f222222fe2222ef.
        ..f2222ffeeeeeef.
        ...fffff.feeeef..
        ..........ffff...
        `],
    200,
    true
    )
})
let player_1: Sprite = null
tiles.setCurrentTilemap(tilemap`level4`)
player_1 = sprites.create(img`
    .....fffffff.....
    ...ff2222222ff...
    ..f22222222222f..
    .f222fffffff222f.
    .f22f9991119f22f.
    f22f999991199f22f
    f22f999999919f22f
    f22f999999999f22f
    f22f999999999f22f
    f22f999999999f22f
    f222ff99999ff222f
    f22222fffff22222f
    f222222222222222f
    f222222222222222f
    f222222222222222f
    .f222222f222222f.
    .f222222f222222f.
    .f222222f222222f.
    .f222222f222222f.
    .fffffffffffffff.
    `, SpriteKind.Player)
let player_speed = 200
controller.moveSprite(player_1)
forever(function () {
    scene.centerCameraAt(0, 0)
    scene.cameraFollowSprite(player_1)
})
